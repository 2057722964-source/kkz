<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁªôÁâπÂà´ÁöÑ‰Ω†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #fff5f5 0%, #ffeef2 100%);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            position: relative;
            color: #ff6b93;
            cursor: pointer;
            transition: background-color 1s ease;
        }
       
        #container {
            position: relative;
            width: 100%;
            height: 100%;
        }
       
        #cat {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Courier New', monospace;
            font-weight: bold;
            white-space: pre;
            text-align: center;
            z-index: 10;
            transition: all 1s ease;
            font-size: min(4vw, 24px);
            line-height: 1.2;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(-50%, -50%); }
            50% { transform: translate(-50%, -55%); }
        }
       
        .floating-text {
            position: absolute;
            font-size: min(3vw, 20px);
            font-weight: bold;
            color: #ff6b93;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease, transform 0.5s ease;
            padding: min(2vw, 15px) min(3vw, 25px);
            border-radius: 15px;
            max-width: min(80vw, 400px);
            word-wrap: break-word;
            pointer-events: none;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 15px rgba(255, 107, 147, 0.2);
            border: 1px solid rgba(255, 107, 147, 0.3);
            animation: textFloat 4s ease-in-out infinite;
        }
        
        @keyframes textFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
       
        #question-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 20;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            animation: fadeIn 1s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
       
        #question {
            font-size: min(5vw, 36px);
            font-weight: bold;
            margin-bottom: min(5vh, 50px);
            text-align: center;
            padding: 0 20px;
            color: #ff6b93;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
        }
       
        .buttons {
            display: flex;
            gap: min(4vw, 30px);
            margin-top: min(4vh, 30px);
            flex-wrap: wrap;
            justify-content: center;
        }
       
        .btn {
            padding: min(2vh, 15px) min(4vw, 40px);
            font-size: min(3vw, 28px);
            font-weight: bold;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            background: linear-gradient(135deg, #ff6b93 0%, #ff8fa3 100%);
            min-width: min(30vw, 150px);
            box-shadow: 0 4px 15px rgba(255, 107, 147, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }
       
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255, 107, 147, 0.4);
        }
        
        .btn:hover::after {
            left: 100%;
        }
       
        #music-toggle {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            background: linear-gradient(135deg, #ff6b93 0%, #ff8fa3 100%);
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            z-index: 30;
            font-size: min(2vw, 14px);
            box-shadow: 0 4px 10px rgba(255, 107, 147, 0.3);
            transition: all 0.3s ease;
        }
        
        #music-toggle:hover {
            transform: scale(1.05);
        }
       
        #click-hint {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #ff6b93;
            font-size: min(2vw, 14px);
            z-index: 30;
            background: rgba(255, 255, 255, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        #loading-message {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff6b93;
            font-size: min(2.5vw, 16px);
            z-index: 30;
            display: none;
            background: white;
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid #ff6b93;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        #error-message {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff6b6b;
            font-size: min(2.5vw, 14px);
            z-index: 30;
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid #ff6b6b;
            text-align: center;
            max-width: 90vw;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .custom-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: min(4vw, 30px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(255, 107, 147, 0.3);
            text-align: center;
            z-index: 1000;
            border: 3px solid #ff6b93;
            min-width: min(80vw, 300px);
            max-width: 90vw;
            animation: popIn 0.5s ease;
        }
        
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
       
        .custom-alert h3 {
            color: #ff6b93;
            margin-bottom: 15px;
            font-size: min(4vw, 24px);
        }
       
        .custom-alert p {
            color: #666;
            margin-bottom: 20px;
            font-size: min(3vw, 18px);
        }
       
        .custom-alert button {
            background: linear-gradient(135deg, #ff6b93 0%, #ff8fa3 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: min(2.5vw, 16px);
            box-shadow: 0 4px 10px rgba(255, 107, 147, 0.3);
            transition: all 0.3s ease;
        }
        
        .custom-alert button:hover {
            transform: scale(1.05);
        }

        .heart {
            position: absolute;
            width: 20px;
            height: 20px;
            background: #ff6b93;
            transform: rotate(45deg);
            opacity: 0;
            pointer-events: none;
        }
        
        .heart:before, .heart:after {
            content: '';
            width: 20px;
            height: 20px;
            background: #ff6b93;
            border-radius: 50%;
            position: absolute;
        }
        
        .heart:before {
            top: -10px;
            left: 0;
        }
        
        .heart:after {
            top: 0;
            left: -10px;
        }

        @media (max-width: 768px) {
            .buttons {
                flex-direction: column;
                align-items: center;
            }
           
            .btn {
                width: min(60vw, 200px);
            }
           
            #cat {
                font-size: min(5vw, 20px);
            }
        }

        @media (max-width: 480px) {
            #question {
                font-size: min(6vw, 28px);
            }
           
            #cat {
                font-size: min(6vw, 18px);
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <pre id="cat">           /\_/\  
          ( o.o )
           > ^ <  </pre>
       
        <div id="question-container">
            <div id="question">ËÉΩ‰∏çËÉΩËØ∑‰Ω†ÂÅöÊàëÁöÑÂØπË±°Ôºü</div>
            <div class="buttons">
                <button id="yes-btn" class="btn">ÊÑøÊÑè</button>
                <button id="no-btn" class="btn">‰∏çÊÑøÊÑè</button>
            </div>
        </div>
       
        <button id="music-toggle">üîä ÂÅúÊ≠¢Èü≥‰πê</button>
        <div id="click-hint">ÁÇπÂáªÈ°µÈù¢‰ªªÊÑè‰ΩçÁΩÆÂºÄÂßã‰ΩìÈ™å</div>
        <div id="loading-message">Èü≥‰πêÂä†ËΩΩ‰∏≠...</div>
        <div id="error-message"></div>
       
        <!-- ‰ΩøÁî®ÂèØÈù†ÁöÑÈü≥‰πêÊ∫ê -->
        <audio id="background-music" loop preload="auto">
            <source src="https://assets.mixkit.co/music/preview/mixkit-gently-romantic-piano-578.mp3" type="audio/mpeg">
            ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÈü≥È¢ëÂÖÉÁ¥†„ÄÇ
        </audio>
    </div>

    <script>
        // Âè•Â≠êÂàóË°®
        const sentences = [
            "ÊàëÂñúÊ¨¢‰Ω†Ôºå‰πüÂñúÊ¨¢‰Ω†‰∏çÊ≥®ÊÑèÊàëÊó∂ÁöÑÊ†∑Â≠ê„ÄÇ",
            "‰∏é‰Ω†ÂØπËØùÂâçÔºåÊàëÁªÉ‰π†‰∫ÜËÆ∏Â§öÈÅçÂºÄÂú∫ÁôΩ„ÄÇ",
            "‰Ω†Á¨ëËµ∑Êù•ÁöÑÊ†∑Â≠êÔºåÊØîÂè∞ÁÅØÊõ¥ÂÆâÁ®≥„ÄÇ",
            "ÊàëÊÉ≥ÈÄÅ‰Ω†‰∏ÄÊùØÁÉ≠Ëå∂ÔºåÊöñ‰Ω†‰∏ÄÂ§©ÁöÑÂÜ∑È£é„ÄÇ",
            "‰Ω†Ëµ∞ËøëÊó∂ÔºåÊàëÁîöËá≥ËøûÂëºÂê∏ÈÉΩÊÉ≥ÂØπ‰Ω†Ë∞¶ËÆ©„ÄÇ",
            "Êó•Â≠êÊúâÈ£é‰πüÂ•ΩÔºåÊúâÈõ®‰πüÂ•ΩÔºåÂè™Ë¶ÅÊúâ‰Ω†Âú®ÔºåÊàëÂ∞±ÂÆâÈùô„ÄÇ",
            "‰Ω†ÁöÑÂêçÂ≠óÔºåÊòØÊàëÊâÄÊúâÁ¨îËÆ∞ÈáåÊúÄÊÉ≥ÂÜôÁöÑ‰∏ÄË°å„ÄÇ",
            "Êàë‰∏çÊòØ‰Ω†ËΩ∞ËΩ∞ÁÉàÁÉàÁöÑÊïÖ‰∫ãÔºåÂè™ÊòØ‰Ω†Âπ≥Ê∑°Êó•ÈáåÁöÑÊ∏©Êüî„ÄÇ",
            "Êàë‰π†ÊÉØ‰∫ÜÂú®ÊúãÂèãÂúàÈáåÂñúÊ¨¢‰Ω†Ôºå‰ΩÜ‰ªé‰∏çÁÇπËµû„ÄÇ",
            "‰Ω†‰∏çÁü•ÈÅìÔºåÈÇ£‰∫õÊàëÂÅáË£ÖÊó†‰∫ãÁöÑÁ¨ëÔºåÊòØ‰∏∫‰Ω†‰øùÁïôÁöÑ„ÄÇ",
            "ÂÅ∂ÁÑ∂Âíå‰Ω†Êì¶ËÇ©ÔºåÊòØÊàëÂøÉÈáåÂºÄËä±ÁöÑÁû¨Èó¥„ÄÇ",
            "ÊàëÊÉ≥Âíå‰Ω†ËÅäÁöÑ‰∏çÂè™ÊòØÂ§©Ê∞îÔºåËøòÊúâ‰Ω†Ê≤°ËØ¥Âá∫Âè£ÁöÑÊÑøÊúõ„ÄÇ",
            "ÂñúÊ¨¢‰∏Ä‰∏™‰∫∫ÔºåÂ∞±ÊòØÊòéÁü•ÈÅìËµ∞‰∏çËøõÂéªÔºåÂç¥ËøòÊÉ≥Ëµ∞Ëøë„ÄÇ",
            "‰Ω†Âú®ÊàëË∫´ËæπÊó∂ÔºåÂ§©Á©∫‰ªø‰ΩõÂÆâÈùô‰∫Ü‰∏ãÊù•„ÄÇ",
            "ÊàëÊÑøÊÑèÂÅö‰Ω†Áúã‰∏çÂà∞ÁöÑÈÇ£‰∏™‰∫∫ÔºåÂç¥‰∏ÄÁõ¥Âú®‰Ω†Ë∫´Ëæπ„ÄÇ",
            "ÊàëÁöÑ‰∏ñÁïå‰∏çÂ§ßÔºå‰ΩÜË£Ö‰Ω†Ê≠£Â•Ω„ÄÇ",
            "‰Ω†Ëã•ÂèëÂÖâÔºåÊàëÂ∞±Âú®ÊóÅËæπÊà¥Â¢®ÈïúÊ¨£Ëµè„ÄÇ",
            "Êàë‰∏çÊÄ•‰∫éË°®ÁôΩÔºåÂè™ÊÉ≥ÂÅö‰Ω†ÁîüÊ¥ªÈáåÁöÑ‰∏ÄÈ¢óÂ∞èÂÆâÂÆö„ÄÇ",
            "ÊØèÊ¨°ËßÅÂà∞‰Ω†ÔºåÊàëÈÉΩÂæàÊÉ≥ÈóÆ‰∏ÄÂè•Ôºö‰Ω†ÂàöÂ•ΩÂ•ΩÂêóÔºü",
            "ÊàëÂñúÊ¨¢‰Ω†ÔºåÂ∞±ÂÉèÂñúÊ¨¢ÂÜ¨Â§©ÁöÑÊöñÈò≥ÔºåÊÇÑÊÇÑÂú∞Êù•‰∫Ü„ÄÇ"
        ];

        // Â∞èÁå´Áä∂ÊÄÅ
        const catStates = {
            normal: "           /\\_/\\  \n          ( o.o ) \n           > ^ <  ",
            blink: "           /\\_/\\  \n          ( -.- ) \n           > ^ <  ",
            sad: "           /\\_/\\  \n          ( T.T ) \n           > ^ <  ",
            happy: "           /\\_/\\  \n          ( ^.^ ) \n           > ^ <  "
        };

        // ÂÖ®Â±ÄÂèòÈáè
        let displayedSentences = 0;
        let noButtonClicks = 0;
        let backgroundMusic;
        let isMusicPlaying = false;
        let userInteracted = false;
        let musicLoaded = false;
        let heartsInterval;

        // ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        // ÂàùÂßãÂåñÂ∫îÁî®
        function initializeApp() {
            // Ëé∑ÂèñÈü≥È¢ëÂÖÉÁ¥†
            backgroundMusic = document.getElementById('background-music');
           
            // ËÆæÁΩÆÈü≥‰πê‰∫ã‰ª∂ÁõëÂê¨
            setupMusicEvents();
           
            // ÈöèÊú∫Êâì‰π±Âè•Â≠êÈ°∫Â∫è
            shuffleArray(sentences);
           
            // ËÆæÁΩÆÁî®Êà∑‰∫§‰∫íÁõëÂê¨
            setupUserInteraction();
           
            // ËÆæÁΩÆÊåâÈíÆ‰∫ã‰ª∂
            document.getElementById('yes-btn').addEventListener('click', onYesClicked);
            document.getElementById('no-btn').addEventListener('click', onNoClicked);
            document.getElementById('music-toggle').addEventListener('click', toggleMusic);
           
            // È¢ÑÂä†ËΩΩÈü≥‰πêÂπ∂Ëá™Âä®Êí≠Êîæ
            preloadAndPlayMusic();
           
            // ÂàùÂßãË∞ÉÊï¥Â∏ÉÂ±Ä
            adjustLayout();
        }

        // Ë∞ÉÊï¥Â∏ÉÂ±Ä
        function adjustLayout() {
            const cat = document.getElementById('cat');
           
            // Á°Æ‰øùÂ∞èÁå´ÂÆåÊï¥ÊòæÁ§∫
            const catWidth = cat.offsetWidth;
            const catHeight = cat.offsetHeight;
           
            if (catWidth > window.innerWidth * 0.8 || catHeight > window.innerHeight * 0.8) {
                cat.style.fontSize = Math.min(
                    window.innerWidth * 0.03,
                    window.innerHeight * 0.05,
                    24
                ) + 'px';
            }
        }

        // ËÆæÁΩÆÈü≥‰πê‰∫ã‰ª∂ÁõëÂê¨
        function setupMusicEvents() {
            backgroundMusic.addEventListener('loadstart', function() {
                showLoading('Èü≥‰πêÂä†ËΩΩ‰∏≠...');
            });
           
            backgroundMusic.addEventListener('canplay', function() {
                hideLoading();
                musicLoaded = true;
            });
           
            backgroundMusic.addEventListener('error', function(e) {
                hideLoading();
                musicLoaded = false;
                showError('Èü≥‰πêÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÁΩëÁªúËøûÊé•');
            });
        }

        // È¢ÑÂä†ËΩΩÂπ∂Ëá™Âä®Êí≠ÊîæÈü≥‰πê
        function preloadAndPlayMusic() {
            backgroundMusic.volume = 0.7;
            
            // ËÆæÁΩÆËá™Âä®Êí≠Êîæ
            const playPromise = backgroundMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    // Ëá™Âä®Êí≠ÊîæÊàêÂäü
                    isMusicPlaying = true;
                    document.getElementById('music-toggle').innerHTML = 'üîä ÂÅúÊ≠¢Èü≥‰πê';
                    hideLoading();
                }).catch(error => {
                    // Ëá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢ÔºåÈúÄË¶ÅÁî®Êà∑‰∫§‰∫í
                    hideLoading();
                    showError('ËØ∑ÁÇπÂáªÈ°µÈù¢‰ªªÊÑè‰ΩçÁΩÆÂºÄÂßãÊí≠ÊîæÈü≥‰πê');
                    userInteracted = false; // ÈáçÁΩÆ‰∫§‰∫íÁä∂ÊÄÅ
                });
            }
        }

        // ÊòæÁ§∫Âä†ËΩΩ‰ø°ÊÅØ
        function showLoading(message) {
            const loadingDiv = document.getElementById('loading-message');
            loadingDiv.textContent = message;
            loadingDiv.style.display = 'block';
        }

        // ÈöêËóèÂä†ËΩΩ‰ø°ÊÅØ
        function hideLoading() {
            document.getElementById('loading-message').style.display = 'none';
        }

        // ÊòæÁ§∫ÈîôËØØ‰ø°ÊÅØ
        function showError(message, type = 'error') {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            errorDiv.style.borderColor = type === 'success' ? '#4CAF50' : '#ff6b6b';
            errorDiv.style.color = type === 'success' ? '#4CAF50' : '#ff6b6b';
           
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 3000);
        }

        // ËÆæÁΩÆÁî®Êà∑‰∫§‰∫íÁõëÂê¨
        function setupUserInteraction() {
            document.body.addEventListener('click', function(e) {
                if (!userInteracted) {
                    userInteracted = true;
                    document.getElementById('click-hint').style.display = 'none';
                    
                    // Â¶ÇÊûúÈü≥‰πêËøòÊ≤°Êí≠ÊîæÔºåÁé∞Âú®Êí≠Êîæ
                    if (!isMusicPlaying && musicLoaded) {
                        playMusic();
                    }
                    
                    startShowingSentences();
                    startCatBlinking();
                    createHeart(e.clientX, e.clientY);
                } else {
                    createHeart(e.clientX, e.clientY);
                }
            });

            // Á™óÂè£Â§ßÂ∞èÂèòÂåñÊó∂ÈáçÊñ∞Ë∞ÉÊï¥Â∏ÉÂ±Ä
            window.addEventListener('resize', function() {
                adjustLayout();
                if (document.getElementById('question-container').style.display === 'flex') {
                    showQuestion();
                }
            });
        }

        // ÂàõÂª∫Áà±ÂøÉÊïàÊûú
        function createHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.style.left = (x - 10) + 'px';
            heart.style.top = (y - 10) + 'px';
            document.body.appendChild(heart);
            
            // Áà±ÂøÉÂä®Áîª
            const size = Math.random() * 10 + 10;
            heart.style.width = size + 'px';
            heart.style.height = size + 'px';
            
            setTimeout(() => {
                heart.style.opacity = '1';
                heart.style.transform = `rotate(45deg) translateY(-${Math.random() * 100 + 50}px)`;
                heart.style.opacity = '0';
                
                setTimeout(() => {
                    if (heart.parentNode) {
                        heart.parentNode.removeChild(heart);
                    }
                }, 1000);
            }, 10);
        }

        // Êâì‰π±Êï∞ÁªÑ
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // ÂºÄÂßãÊòæÁ§∫Âè•Â≠ê
        function startShowingSentences() {
            const interval = setInterval(() => {
                if (displayedSentences < sentences.length) {
                    createFloatingText(sentences[displayedSentences]);
                    displayedSentences++;
                } else {
                    clearInterval(interval);
                    setTimeout(showQuestion, 1000);
                }
            }, 800);
        }

        // ÂàõÂª∫ÊµÆÂä®ÊñáÊú¨
        function createFloatingText(text) {
            const container = document.getElementById('container');
            const textElement = document.createElement('div');
            textElement.className = 'floating-text';
            textElement.textContent = text + "  (=^ÔΩ•œâÔΩ•^=)";
           
            // ÈöèÊú∫‰ΩçÁΩÆÔºåÈÅøÂºÄÂ∞èÁå´Âå∫Âüü
            let x, y;
            const catRect = document.getElementById('cat').getBoundingClientRect();
            const catArea = {
                left: catRect.left - 80,
                top: catRect.top - 60,
                right: catRect.right + 80,
                bottom: catRect.bottom + 60
            };
           
            let attempts = 0;
            do {
                x = Math.random() * (window.innerWidth - 200) + 50;
                y = Math.random() * (window.innerHeight - 100) + 50;
                attempts++;
                if (attempts > 50) break; // Èò≤Ê≠¢Êó†ÈôêÂæ™ÁéØ
            } while (
                x > catArea.left && x < catArea.right &&
                y > catArea.top && y < catArea.bottom
            );
           
            textElement.style.left = `${x}px`;
            textElement.style.top = `${y}px`;
            container.appendChild(textElement);
           
            // Ê∑°ÂÖ•Ê∑°Âá∫Âä®Áîª
            setTimeout(() => {
                textElement.style.opacity = '1';
                textElement.style.transform = 'translateY(-10px)';
            }, 10);
            
            setTimeout(() => {
                textElement.style.opacity = '0';
                textElement.style.transform = 'translateY(-30px)';
                setTimeout(() => {
                    if (textElement.parentNode) {
                        container.removeChild(textElement);
                    }
                }, 500);
            }, 3000);
        }

        // Â∞èÁå´Áú®ÁúºÂä®Áîª
        function startCatBlinking() {
            setInterval(() => {
                const cat = document.getElementById('cat');
                if (cat.textContent === catStates.normal &&
                    document.getElementById('question-container').style.display !== 'flex') {
                    cat.textContent = catStates.blink;
                    setTimeout(() => {
                        cat.textContent = catStates.normal;
                    }, 200);
                }
            }, 2000);
        }

        // ÊòæÁ§∫ÈóÆÈ¢ò
        function showQuestion() {
            const cat = document.getElementById('cat');
            const questionContainer = document.getElementById('question-container');
           
            // ÁßªÂä®Â∞èÁå´Âà∞‰∏äÊñπ
            const catX = window.innerWidth / 2;
            const catY = Math.min(100, window.innerHeight * 0.1);
           
            cat.style.left = `${catX}px`;
            cat.style.top = `${catY}px`;
            cat.style.transform = 'translateX(-50%)';
            cat.style.fontSize = Math.min(window.innerWidth * 0.03, 20) + 'px';
            cat.style.textAlign = 'center';
           
            // ÊòæÁ§∫ÈóÆÈ¢ò
            questionContainer.style.display = 'flex';
            cat.style.zIndex = '25';
            
            // ÂºÄÂßãÁà±ÂøÉÈõ®
            startHeartRain();
        }
        
        // ÂºÄÂßãÁà±ÂøÉÈõ®
        function startHeartRain() {
            heartsInterval = setInterval(() => {
                const x = Math.random() * window.innerWidth;
                createHeart(x, -20);
            }, 300);
        }

        // ÊÑøÊÑèÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
        function onYesClicked() {
            const cat = document.getElementById('cat');
            cat.textContent = catStates.happy;
            
            // ÂÅúÊ≠¢Áà±ÂøÉÈõ®
            clearInterval(heartsInterval);
            
            // Â¢ûÂä†Áà±ÂøÉÊïàÊûú
            for (let i = 0; i < 20; i++) {
                setTimeout(() => {
                    const x = Math.random() * window.innerWidth;
                    const y = Math.random() * window.innerHeight;
                    createHeart(x, y);
                }, i * 100);
            }
           
            setTimeout(() => {
                showCustomAlert();
            }, 1500);
        }

        // ÊòæÁ§∫Ëá™ÂÆö‰πâÂºπÁ™ó
        function showCustomAlert() {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'custom-alert';
            alertDiv.innerHTML = `
                <h3>üéâ Â§™Ê£í‰∫ÜÔºÅ</h3>
                <p>Â§™Â•Ω‰∫ÜÔºÅË∞¢Ë∞¢‰Ω†ÊÑøÊÑèÔºÅ</p>
                <p><small>È°µÈù¢Â∞ÜÂú®3ÁßíÂêéËá™Âä®ÂÖ≥Èó≠...</small></p>
                <button onclick="closePage()">Á´ãÂç≥ÂÖ≥Èó≠</button>
            `;
            document.body.appendChild(alertDiv);
            setTimeout(closePage, 3000);
        }

        // ÂÖ≥Èó≠È°µÈù¢ÂáΩÊï∞
        function closePage() {
            stopMusic();
            setTimeout(() => {
                window.close();
                setTimeout(() => {
                    window.location.href = 'about:blank';
                }, 100);
            }, 500);
        }

        // ‰∏çÊÑøÊÑèÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
        function onNoClicked() {
            noButtonClicks++;
            const noBtn = document.getElementById('no-btn');
            const yesBtn = document.getElementById('yes-btn');
            const cat = document.getElementById('cat');
           
            cat.textContent = catStates.sad;
           
            if (noButtonClicks >= 3) {
                noBtn.style.display = 'none';
                showError('ÁúüÁöÑ‰∏çÂèØ‰ª•ËÄÉËôë‰∏Ä‰∏ãÂêóÔºåÁúüÁöÑÂæàËÆ§ÁúüÁöÑÔºÅ', 'error');
            } else {
                const currentScale = Math.pow(0.7, noButtonClicks);
                const yesScale = Math.pow(1.3, noButtonClicks);
                noBtn.style.transform = `scale(${currentScale})`;
                yesBtn.style.transform = `scale(${yesScale})`;
            }
        }

        // Êí≠ÊîæÈü≥‰πê
        function playMusic() {
            if (backgroundMusic && musicLoaded) {
                const playPromise = backgroundMusic.play();
               
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isMusicPlaying = true;
                        document.getElementById('music-toggle').innerHTML = 'üîä ÂÅúÊ≠¢Èü≥‰πê';
                    }).catch(error => {
                        showError('Êí≠ÊîæÂ§±Ë¥•: ' + error.message);
                        isMusicPlaying = false;
                    });
                }
            }
        }

        // ÂàáÊç¢Èü≥‰πê
        function toggleMusic() {
            if (!isMusicPlaying) {
                playMusic();
            } else {
                stopMusic();
            }
        }

        // ÂÅúÊ≠¢Èü≥‰πê
        function stopMusic() {
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
            }
            isMusicPlaying = false;
            document.getElementById('music-toggle').innerHTML = 'üîá Êí≠ÊîæÈü≥‰πê';
        }

        // ‰ΩøÂáΩÊï∞Âú®ÂÖ®Â±ÄÂèØËÆøÈóÆ
        window.closePage = closePage;
    </script>
</body>
</html>
