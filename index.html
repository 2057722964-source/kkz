<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁªôÁâπÂà´ÁöÑ‰Ω†</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background-color: white;
            overflow: hidden;
            height: 100vh;
            width: 100vw;
            position: relative;
            color: #ffb6c1;
            cursor: pointer;
        }
       
        #container {
            position: relative;
            width: 100%;
           
        }
       
        #cat {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'Courier New', monospace;
            font-weight: bold;
            white-space: pre;
            text-align: center;
            z-index: 10;
            transition: all 1s ease;
            font-size: min(4vw, 24px);
            line-height: 1.2;
        }
       
        .floating-text {
            position: absolute;
            font-size: min(3vw, 20px);
            font-weight: bold;
            color: #ffb6c1;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding: min(2vw, 15px) min(3vw, 25px);
            border-radius: 10px;
            max-width: min(80vw, 400px);
            word-wrap: break-word;
            pointer-events: none;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
        }
       
        #question-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
           
            display: none;
            flex-direction: column;
            align-items: center;
            z-index: 20;
            background-color: white;
            padding-top: min(10vh, 100px);
        }
       
        #question {
            font-size: min(5vw, 36px);
            font-weight: bold;
            margin-bottom: min(5vh, 50px);
            text-align: center;
            margin-top: min(20vh, 200px);
            padding: 0 20px;
        }
       
        .buttons {
            display: flex;
            gap: min(4vw, 30px);
            margin-top: min(4vh, 30px);
            flex-wrap: wrap;
            justify-content: center;
        }
       
        .btn {
            padding: min(2vh, 15px) min(4vw, 40px);
            font-size: min(3vw, 28px);
            font-weight: bold;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            background-color: #ffb6c1;
            min-width: min(30vw, 150px);
        }
       
        .btn:hover {
            transform: scale(1.05);
            background-color: #ff91a4;
        }
       
        #music-toggle {
            position: absolute;
            bottom: 20px;
            right: 20px;
            padding: 10px 15px;
            background-color: #ffb6c1;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 30;
            font-size: min(2vw, 14px);
        }
       
        #click-hint {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: #ffb6c1;
            font-size: min(2vw, 14px);
            z-index: 30;
        }

        #loading-message {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffb6c1;
            font-size: min(2.5vw, 16px);
            z-index: 30;
            display: none;
            background: white;
            padding: 10px 20px;
            border-radius: 5px;
            border: 1px solid #ffb6c1;
        }

        #error-message {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            color: #ff6b6b;
            font-size: min(2.5vw, 14px);
            z-index: 30;
            display: none;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 20px;
            border-radius: 5px;
            border: 1px solid #ff6b6b;
            text-align: center;
            max-width: 90vw;
        }

        #music-alternative {
            position: absolute;
            bottom: 60px;
            right: 20px;
            padding: 8px 12px;
            background-color: #ffb6c1;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            z-index: 30;
            font-size: min(1.8vw, 12px);
        }

        .custom-alert {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: min(4vw, 30px);
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(255, 182, 193, 0.3);
            text-align: center;
            z-index: 1000;
            border: 3px solid #ffb6c1;
            min-width: min(80vw, 300px);
            max-width: 90vw;
        }
       
        .custom-alert h3 {
            color: #ffb6c1;
            margin-bottom: 15px;
            font-size: min(4vw, 24px);
        }
       
        .custom-alert p {
            color: #666;
            margin-bottom: 20px;
            font-size: min(3vw, 18px);
        }
       
        .custom-alert button {
            background: #ffb6c1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: min(2.5vw, 16px);
        }

        @media (max-width: 768px) {
            .buttons {
                flex-direction: column;
                align-items: center;
            }
           
            .btn {
                width: min(60vw, 200px);
            }
           
            #cat {
                font-size: min(5vw, 20px);
            }
        }

        @media (max-width: 480px) {
            #question {
                margin-top: min(15vh, 150px);
                font-size: min(6vw, 28px);
            }
           
            #cat {
                font-size: min(6vw, 18px);
            }
        }
    </style>
</head>
<body>
    <div id="container">
        <pre id="cat">           /\_/\  
          ( o.o )
           > ^ <  </pre>
       
        <div id="question-container">
            <div id="question">ËÉΩ‰∏çËÉΩËØ∑‰Ω†ÂÅöÊàëÁöÑÂØπË±°Ôºü</div>
            <div class="buttons">
                <button id="yes-btn" class="btn">ÊÑøÊÑè</button>
                <button id="no-btn" class="btn">‰∏çÊÑøÊÑè</button>
            </div>
        </div>
       
        <button id="music-toggle">üîá ÁÇπÂáªÊí≠ÊîæÈü≥‰πê</button>
        <button id="music-alternative" style="display: none;">üéµ ‰ΩøÁî®Â§áÁî®Èü≥‰πê</button>
        <div id="click-hint">ÁÇπÂáªÈ°µÈù¢‰ªªÊÑè‰ΩçÁΩÆÂºÄÂßã‰ΩìÈ™å</div>
        <div id="loading-message">Èü≥‰πêÂä†ËΩΩ‰∏≠...</div>
        <div id="error-message"></div>
       
        <audio id="background-music" loop preload="auto">
            <source src="https://raw.githubusercontent.com/2057722964-source/kkz/main/gift.mp3" type="audio/mpeg">
            <source src="https://assets.mixkit.co/music/preview/mixkit-gently-romantic-piano-578.mp3" type="audio/mpeg">
            ÊÇ®ÁöÑÊµèËßàÂô®‰∏çÊîØÊåÅÈü≥È¢ëÂÖÉÁ¥†„ÄÇ
        </audio>
    </div>

    <script>
        const sentences = [
            "ÊàëÂñúÊ¨¢‰Ω†Ôºå‰πüÂñúÊ¨¢‰Ω†‰∏çÊ≥®ÊÑèÊàëÊó∂ÁöÑÊ†∑Â≠ê„ÄÇ",
            "‰∏é‰Ω†ÂØπËØùÂâçÔºåÊàëÁªÉ‰π†‰∫ÜËÆ∏Â§öÈÅçÂºÄÂú∫ÁôΩ„ÄÇ",
            "‰Ω†Á¨ëËµ∑Êù•ÁöÑÊ†∑Â≠êÔºåÊØîÂè∞ÁÅØÊõ¥ÂÆâÁ®≥„ÄÇ",
            "ÊàëÊÉ≥ÈÄÅ‰Ω†‰∏ÄÊùØÁÉ≠Ëå∂ÔºåÊöñ‰Ω†‰∏ÄÂ§©ÁöÑÂÜ∑È£é„ÄÇ",
            "‰Ω†Ëµ∞ËøëÊó∂ÔºåÊàëÁîöËá≥ËøûÂëºÂê∏ÈÉΩÊÉ≥ÂØπ‰Ω†Ë∞¶ËÆ©„ÄÇ",
            "Êó•Â≠êÊúâÈ£é‰πüÂ•ΩÔºåÊúâÈõ®‰πüÂ•ΩÔºåÂè™Ë¶ÅÊúâ‰Ω†Âú®ÔºåÊàëÂ∞±ÂÆâÈùô„ÄÇ",
            "‰Ω†ÁöÑÂêçÂ≠óÔºåÊòØÊàëÊâÄÊúâÁ¨îËÆ∞ÈáåÊúÄÊÉ≥ÂÜôÁöÑ‰∏ÄË°å„ÄÇ",
            "Êàë‰∏çÊòØ‰Ω†ËΩ∞ËΩ∞ÁÉàÁÉàÁöÑÊïÖ‰∫ãÔºåÂè™ÊòØ‰Ω†Âπ≥Ê∑°Êó•ÈáåÁöÑÊ∏©Êüî„ÄÇ",
            "Êàë‰π†ÊÉØ‰∫ÜÂú®ÊúãÂèãÂúàÈáåÂñúÊ¨¢‰Ω†Ôºå‰ΩÜ‰ªé‰∏çÁÇπËµû„ÄÇ",
            "‰Ω†‰∏çÁü•ÈÅìÔºåÈÇ£‰∫õÊàëÂÅáË£ÖÊó†‰∫ãÁöÑÁ¨ëÔºåÊòØ‰∏∫‰Ω†‰øùÁïôÁöÑ„ÄÇ",
            "ÂÅ∂ÁÑ∂Âíå‰Ω†Êì¶ËÇ©ÔºåÊòØÊàëÂøÉÈáåÂºÄËä±ÁöÑÁû¨Èó¥„ÄÇ",
            "ÊàëÊÉ≥Âíå‰Ω†ËÅäÁöÑ‰∏çÂè™ÊòØÂ§©Ê∞îÔºåËøòÊúâ‰Ω†Ê≤°ËØ¥Âá∫Âè£ÁöÑÊÑøÊúõ„ÄÇ",
            "ÂñúÊ¨¢‰∏Ä‰∏™‰∫∫ÔºåÂ∞±ÊòØÊòéÁü•ÈÅìËµ∞‰∏çËøõÂéªÔºåÂç¥ËøòÊÉ≥Ëµ∞Ëøë„ÄÇ",
            "‰Ω†Âú®ÊàëË∫´ËæπÊó∂ÔºåÂ§©Á©∫‰ªø‰ΩõÂÆâÈùô‰∫Ü‰∏ãÊù•„ÄÇ",
            "ÊàëÊÑøÊÑèÂÅö‰Ω†Áúã‰∏çÂà∞ÁöÑÈÇ£‰∏™‰∫∫ÔºåÂç¥‰∏ÄÁõ¥Âú®‰Ω†Ë∫´Ëæπ„ÄÇ",
            "ÊàëÁöÑ‰∏ñÁïå‰∏çÂ§ßÔºå‰ΩÜË£Ö‰Ω†Ê≠£Â•Ω„ÄÇ",
            "‰Ω†Ëã•ÂèëÂÖâÔºåÊàëÂ∞±Âú®ÊóÅËæπÊà¥Â¢®ÈïúÊ¨£Ëµè„ÄÇ",
            "Êàë‰∏çÊÄ•‰∫éË°®ÁôΩÔºåÂè™ÊÉ≥ÂÅö‰Ω†ÁîüÊ¥ªÈáåÁöÑ‰∏ÄÈ¢óÂ∞èÂÆâÂÆö„ÄÇ",
            "ÊØèÊ¨°ËßÅÂà∞‰Ω†ÔºåÊàëÈÉΩÂæàÊÉ≥ÈóÆ‰∏ÄÂè•Ôºö‰Ω†ÂàöÂ•ΩÂ•ΩÂêóÔºü",
            "ÊàëÂñúÊ¨¢‰Ω†ÔºåÂ∞±ÂÉèÂñúÊ¨¢ÂÜ¨Â§©ÁöÑÊöñÈò≥ÔºåÊÇÑÊÇÑÂú∞Êù•‰∫Ü„ÄÇ"
        ];

        const catStates = {
            normal: "           /\\_/\\  \n          ( o.o ) \n           > ^ <  ",
            blink: "           /\\_/\\  \n          ( -.- ) \n           > ^ <  ",
            sad: "           /\\_/\\  \n          ( T.T ) \n           > ^ <  "
        };

        let displayedSentences = 0;
        let noButtonClicks = 0;
        let backgroundMusic;
        let isMusicPlaying = false;
        let userInteracted = false;
        let musicLoaded = false;
        let currentMusicSource = 0;

        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            backgroundMusic = document.getElementById('background-music');
            setupMusicEvents();
            shuffleArray(sentences);
            setupUserInteraction();
           
            document.getElementById('yes-btn').addEventListener('click', onYesClicked);
            document.getElementById('no-btn').addEventListener('click', onNoClicked);
            document.getElementById('music-toggle').addEventListener('click', toggleMusic);
            document.getElementById('music-alternative').addEventListener('click', switchMusicSource);
           
            preloadMusic();
            adjustLayout();
        }

        function adjustLayout() {
            const cat = document.getElementById('cat');
            const catWidth = cat.offsetWidth;
            const catHeight = cat.offsetHeight;
           
            if (catWidth > window.innerWidth * 0.8 || catHeight > window.innerHeight * 0.8) {
                cat.style.fontSize = Math.min(
                    window.innerWidth * 0.03,
                    window.innerHeight * 0.05,
                    24
                ) + 'px';
            }
        }

        function setupMusicEvents() {
            backgroundMusic.addEventListener('loadstart', function() {
                showLoading('Èü≥‰πêÂä†ËΩΩ‰∏≠...');
            });
           
            backgroundMusic.addEventListener('canplay', function() {
                hideLoading();
                musicLoaded = true;
                showError('Èü≥‰πêÂä†ËΩΩÊàêÂäüÔºÅÁÇπÂáªÊí≠ÊîæÊåâÈíÆÂºÄÂßãÊí≠Êîæ', 'success');
            });
           
            backgroundMusic.addEventListener('error', function(e) {
                hideLoading();
                musicLoaded = false;
                showError('Ëá™ÂÆö‰πâÈü≥‰πêÂä†ËΩΩÂ§±Ë¥•ÔºåÂ∑≤ÂàáÊç¢Âà∞Â§áÁî®Èü≥‰πê');
                document.getElementById('music-alternative').style.display = 'block';
            });
        }

        function switchMusicSource() {
            currentMusicSource = 1;
            backgroundMusic.load();
            showLoading('ÂàáÊç¢Èü≥‰πê‰∏≠...');
            document.getElementById('music-alternative').style.display = 'none';
        }

        function preloadMusic() {
            backgroundMusic.volume = 0.7;
            backgroundMusic.load();
        }

        function showLoading(message) {
            const loadingDiv = document.getElementById('loading-message');
            loadingDiv.textContent = message;
            loadingDiv.style.display = 'block';
        }

        function hideLoading() {
            document.getElementById('loading-message').style.display = 'none';
        }

        function showError(message, type = 'error') {
            const errorDiv = document.getElementById('error-message');
            errorDiv.textContent = message;
            errorDiv.style.display = 'block';
            errorDiv.style.borderColor = type === 'success' ? '#4CAF50' : '#ff6b6b';
            errorDiv.style.color = type === 'success' ? '#4CAF50' : '#ff6b6b';
           
            setTimeout(() => {
                errorDiv.style.display = 'none';
            }, 3000);
        }

        function setupUserInteraction() {
            document.body.addEventListener('click', function() {
                if (!userInteracted) {
                    userInteracted = true;
                    document.getElementById('click-hint').style.display = 'none';
                    startShowingSentences();
                    startCatBlinking();
                }
            });

            window.addEventListener('resize', function() {
                adjustLayout();
                if (document.getElementById('question-container').style.display === 'flex') {
                    showQuestion();
                }
            });
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function startShowingSentences() {
            const interval = setInterval(() => {
                if (displayedSentences < sentences.length) {
                    createFloatingText(sentences[displayedSentences]);
                    displayedSentences++;
                } else {
                    clearInterval(interval);
                    setTimeout(showQuestion, 1000);
                }
            }, 800);
        }

        function createFloatingText(text) {
            const container = document.getElementById('container');
            const textElement = document.createElement('div');
            textElement.className = 'floating-text';
            textElement.textContent = text + "  (=^ÔΩ•œâÔΩ•^=)";
           
            let x, y;
            const catRect = document.getElementById('cat').getBoundingClientRect();
            const catArea = {
                left: catRect.left - 80,
                top: catRect.top - 60,
                right: catRect.right + 80,
                bottom: catRect.bottom + 60
            };
           
            let attempts = 0;
            do {
                x = Math.random() * (window.innerWidth - 200) + 50;
                y = Math.random() * (window.innerHeight - 100) + 50;
                attempts++;
                if (attempts > 50) break;
            } while (
                x > catArea.left && x < catArea.right &&
                y > catArea.top && y < catArea.bottom
            );
           
            textElement.style.left = `${x}px`;
            textElement.style.top = `${y}px`;
            container.appendChild(textElement);
           
            setTimeout(() => textElement.style.opacity = '1', 10);
            setTimeout(() => {
                textElement.style.opacity = '0';
                setTimeout(() => {
                    if (textElement.parentNode) {
                        container.removeChild(textElement);
                    }
                }, 500);
            }, 3000);
        }

        function startCatBlinking() {
            setInterval(() => {
                const cat = document.getElementById('cat');
                if (cat.textContent === catStates.normal &&
                    document.getElementById('question-container').style.display !== 'flex') {
                    cat.textContent = catStates.blink;
                    setTimeout(() => {
                        cat.textContent = catStates.normal;
                    }, 200);
                }
            }, 2000);
        }

        function showQuestion() {
            const cat = document.getElementById('cat');
            const questionContainer = document.getElementById('question-container');
           
            const catX = window.innerWidth / 2;
            const catY = Math.min(100, window.innerHeight * 0.1);
           
            cat.style.left = `${catX}px`;
            cat.style.top = `${catY}px`;
            cat.style.transform = 'translateX(-50%)';
            cat.style.fontSize = Math.min(window.innerWidth * 0.03, 20) + 'px';
            cat.style.textAlign = 'center';
           
            questionContainer.style.display = 'flex';
            cat.style.zIndex = '25';
        }

        function onYesClicked() {
            const cat = document.getElementById('cat');
            cat.textContent = catStates.blink;
           
            setTimeout(() => {
                cat.textContent = catStates.normal;
                showCustomAlert();
            }, 500);
        }

        function showCustomAlert() {
            const alertDiv = document.createElement('div');
            alertDiv.className = 'custom-alert';
            alertDiv.innerHTML = `
                <h3>üéâ Â§™Ê£í‰∫ÜÔºÅ</h3>
                <p>Â§™Â•Ω‰∫ÜÔºÅË∞¢Ë∞¢‰Ω†ÊÑøÊÑèÔºÅ</p>
                <p><small>È°µÈù¢Â∞ÜÂú®3ÁßíÂêéËá™Âä®ÂÖ≥Èó≠...</small></p>
                <button onclick="closePage()">Á´ãÂç≥ÂÖ≥Èó≠</button>
            `;
            document.body.appendChild(alertDiv);
            setTimeout(closePage, 3000);
        }

        function closePage() {
            stopMusic();
            setTimeout(() => {
                window.close();
                setTimeout(() => {
                    window.location.href = 'about:blank';
                }, 100);
            }, 500);
        }

        function onNoClicked() {
            noButtonClicks++;
            const noBtn = document.getElementById('no-btn');
            const yesBtn = document.getElementById('yes-btn');
            const cat = document.getElementById('cat');
           
            cat.textContent = catStates.sad;
           
            if (noButtonClicks >= 3) {
                noBtn.style.display = 'none';
            } else {
                const currentScale = Math.pow(0.7, noButtonClicks);
                const yesScale = Math.pow(1.3, noButtonClicks);
                noBtn.style.transform = `scale(${currentScale})`;
                yesBtn.style.transform = `scale(${yesScale})`;
            }
        }

        function toggleMusic() {
            if (!userInteracted) {
                document.body.click();
                return;
            }
           
            if (!musicLoaded) {
                showError('Èü≥‰πêÂ∞öÊú™Âä†ËΩΩÂÆåÊàêÔºåËØ∑Á®çÂêéÈáçËØï');
                return;
            }
           
            if (!isMusicPlaying) {
                playMusic();
            } else {
                stopMusic();
            }
        }

        function playMusic() {
            if (backgroundMusic && musicLoaded) {
                showLoading('ÂáÜÂ§áÊí≠ÊîæÈü≥‰πê...');
               
                const playPromise = backgroundMusic.play();
               
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isMusicPlaying = true;
                        document.getElementById('music-toggle').innerHTML = 'üîä ÂÅúÊ≠¢Èü≥‰πê';
                        hideLoading();
                        showError('Èü≥‰πêÊí≠ÊîæÊàêÂäüÔºÅ', 'success');
                    }).catch(error => {
                        hideLoading();
                        showError('Êí≠ÊîæÂ§±Ë¥•: ' + error.message);
                        isMusicPlaying = false;
                    });
                }
            }
        }

        function stopMusic() {
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
            }
            isMusicPlaying = false;
            document.getElementById('music-toggle').innerHTML = 'üîá Êí≠ÊîæÈü≥‰πê';
        }

        window.closePage = closePage;
    </script>
</body>
</html>
